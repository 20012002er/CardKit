@import "base";
@import "animation";

//@import "animate/animations/attention-seekers/bounce";
//@import "map1/*.png";
//@include all-map1-sprites;

$text_color: #252525; // 正文、白背景UI上的内容或标题
$desc_color: #787878; // 次要、与白背景UI混为一体的文字
$border_color: #dadada; // 白背景UI上的边框、分割线

$hover_color: #3377aa; // 文本内的链接、触碰状态
$notice_color: #df5001; // 红色提示

$win_bgcolor: #666; // 窗口背景
$card_bgcolor: #f2f2f2; // 视图背景

$headtitle_size: 40px/2; // 文章正文
$article_size: 34px/2; // 文章正文
$maintitle_size: 30px/2; // 标题
$title_size: 26px/2;  // 按钮
$text_size: 22px/2; // 内容

$top_btn_size: 48px/2;

$space: 30px/2;
$radius: 6px/2;
$text_space: 40px/2;

$zindex_card: 10; // 视图内的层级
$zindex_overlay: 100; // 弹出物的层级
$zindex_mask: 1000;
$zindex_step: 10; // 间距

$nav_height: 85px/2;

html {
  -webkit-text-size-adjust: 100%;
}

body {
  font:$text_size Helvetica,sans-serif;
  color:$text_color;
  background:$card_bgcolor;
  line-height:1.7;

  &.bg {
    background: $win_bgcolor;
  }

  &.modal_view {

    .ck-root {
      @include transform(scale(0.8));
    }

  }

}

// ===========
//  UI元素
// ===========

a {
  text-decoration:none;
  color:$hover_color;
  -webkit-touch-callout: none;
}

.btn {
  display:inline-block;
  margin:0 0 0 7px;
  padding:0;
  width: (160px/2);
  height: (58px/2);
  @include border-radius($radius);
  background-color: #81858b;
  border: solid 1px #bcbcbc;
  //@include box-shadow(0 1px #fff, inset 0 2px #fff);
  @include background-image(linear-gradient(bottom, #ccc, #fff));
  font-size:$title_size;
  color:$text_color;
  @include text-shadow(0 1px #fff);
  line-height:(56px/2);
  @include user-select(none);
  -webkit-tap-highlight-color: rgba(0,0,0,0);

  &:first-child {
    margin-left:0;
  }

  &:active {
    @include box-shadow(inset 0 2px 3px rgba(129,129,129,.5));
    @include background-image(linear-gradient(bottom, #ccc, #fff));

    span {
      position:relative;
      top:1px;
    }

  }

}

.btn[data-default=true] {
  background-color: #81858b;
  border: solid 1px #9f9f9f;
  @include background-image(linear-gradient(bottom, #1366a4, #278cd7));
  color:#fff;
  @include text-shadow(0 1px #000);

  &:active {
    background-color: #81858b;
    @include box-shadow(0 1px #fff, inset 0 2px 3px rgba(117,117,117,.51));
    @include background-image(linear-gradient(bottom, #1366a4, #278cd7));
  }

}

// ===========
//  布局
// ===========

.ck-header {
  height: $nav_height;
  @include box-shadow(0 2px 3px rgba(0,0,0,.35));
  z-index:$zindex_step;
  @include user-select(none);

  a {
    -webkit-tap-highlight-color: rgba(0,0,0,0);
  }

  .ck-top-title {
    color:#fff;
    @include text-shadow(0px 1px 0px rgba(0,0,0,1));
  }

  $top_btn_space: 8px;

  .opt {
    display:block;
    position:absolute;
    top:$top_btn_space;
    left:$top_btn_space;
  }

  .ck-top-nav {

  }

  .ck-top-action {
    left:auto;
    right:$top_btn_space;
  }

  .ck-top-create {
    left:auto;
    right:$top_btn_space*3 + $top_btn_size;
  }

}

.ck-top-title {
  font-size:$article_size;
  line-height: $nav_height;
  text-align:center;
  display:block;
  margin:0 $space*4 + 40px;
}

.ck-root {
  @include box-shadow(0px 0px 10px rgba(0,0,0,.35));
  @include transform-origin(50% 50%);
  //@include transform-style(preserve-3d);
  @include transition(transform 0.4s ease-in-out);
  
  .ck-header {
    position:fixed;
    top:0;
    left:0;
    width:100%;
    @include background(linear-gradient(bottom, #78624f, #846f5b));
    z-index: $zindex_overlay;
    @include transform(translateY(-$nav_height));
    @include transition(transform 400ms ease-in-out);

    .btn {
      width:$top_btn_size;
      height:$top_btn_size;
      background:#fff;
      border:1px solid #ccc;
    }

  }

}

.ck-wrapper {
  width:100%;

  &.inited { 

  }

}

.ck-footer {
  display:none;
  height:15px;
  padding:25px 0 15px 0;
  background:$card_bgcolor;
  text-align:center;
  
  .copyright {
    font-size:$text_size;
    color:$desc_color;
    margin:5px 0;
  }

}

.ck-top-tips {
  text-align:center;
  font-size:$title_size;
  color:#999;
  border:1px solid $border_color;
  padding:5px 10px;
  margin:8px 30px ($nav_height - $title_size - 20 + $space) 30px;
  @include border-radius($radius);
}

.ck-globalmask {
  display:none;
  background:#f00;
  opacity:0;
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  padding-bottom:60px;
  z-index: $zindex_mask;
}

.ck-raw {
  display:none;
}

// ===========
//  卡片
// ===========

.ck-card {
  display:none;
  width:100%;
  //padding-top:$nav_height + $space;
  background:$card_bgcolor;
  //@include box-shadow(-3px 0px 10px 0px rgba(0,0,0,.35));
  @include user-select(none);
  overflow-y:scroll;
  -webkit-overflow-scrolling: touch;

  //.ck-wrapper & > *:first-child {
    //margin-top:$nav_height + $space*2;
  //}

  .ck-footer {
    display:block;
  }

  .ckd-create {
    display:none;
  }

  &.moving {
    position:absolute!important;
    top:0;
    left:0;
    z-index:$zindex_card;
    @include transform(translateX(100%));
  }

}

// 默认首屏视图
#ckDefault {

}

.ck-loading {
  display:block;
  position:fixed;
  bottom:0;
  left:0;
  width:100%;
  height:100%;
  background:$card_bgcolor;
  font-size:$headtitle_size;
  color:$desc_color;
  text-align:center;
  overflow-y:visible;

  div {
    display:block;
    margin:0;
    width:100%;
    position:fixed;
    bottom:50px;
    left:0;
  }

  span {
    width:20px;
    height:20px;
    background:#666;
    display:inline-block;
    margin:5px;
    font-size:0;
    @include border-radius(10px);
    @include transform-origin(50% 50%);
    @include animation(loading-dot 1.5s steps(1, start) 0.5s infinite);

    &:first-child {
      @include animation(loading-dot 1.5s steps(1, start) 0s infinite);
    }

    &:last-child {
      @include animation(loading-dot 1.5s steps(1, start) 1s infinite);
    }

  }
  
  .ck-footer, .ck-top-tips {
    display:none;
  }

}

@include keyframes(loading-dot) {
  0% {
    background:#666;
    //@include transform(scale(1));
  }
  33% {
    background:#ccc;
    //@include transform(scale(0.8));
  }
  66% {
    background:#ccc;
    //@include transform(scale(0.8));
  }
  100% {
    background:#666;
    //@include transform(scale(1));
  }
}

// ===========
//  模块
// ===========

// 自定义模块
%ck-cell {
  overflow:hidden;
  margin:$space;
  background-color:#fff;
  border:1px solid rgb(255,255,255);
  @include border-radius($radius);
  @include box-shadow(0px 1px 4px 0px rgba(0,0,0,0.3));

  & > article > header {
    @extend %item;

    .ck-link, span {
      @extend %item-inner;
    }

    .ck-link {
      @extend %more-link;

      &:active {
        @extend %item-inner-active;
      }

    }

  }

  & > article > footer {
    @extend %info-text;
    border-top:1px solid $border_color;
    margin:0 20px;
    padding:($space) 0;
  }

}

%item {
  border-bottom:1px solid $border_color;
  margin:0 20px;
  padding:($space/2) 0;
  -webkit-tap-highlight-color: rgba(0,0,0,0);
}

%item-inner {
  overflow:hidden;
  padding:($space/2) 0;
  font-size:$maintitle_size;
  color:$text_color;
  display:block;
  -webkit-touch-callout: none;
}

%item-inverse {
  background:$hover_color!important;
  color:#fff;
}

%item-inner-active {
  @extend %item-inverse;
  @include border-radius($radius);
  padding-left:10px;
  padding-right:10px;
  margin-left:-20px;
  @include transform(translateX(10px));
}

%more-link {
  background: {
    image: inline-image('drawer_icon.png');
    repeat: no-repeat;
    position: right;
    size: 5.5px 10px;
  }
}

%info-text {
  font-size:$text_size;
  color:$desc_color;
}

// 文本模块
.ck-cell-box {

  &:not([data-cfg-paper]) {
    @extend %ck-cell;

    & > article > header {
      margin-bottom:(28px/2);
    }

    & > article > footer {
      margin-top:(28px/2);
    }

  }

  & > article > section {
    padding:0 $text_space;
    font-size:$title_size;

    &:first-child {
      padding-top:(28px/2);
    }

    &:last-child {
      padding-bottom:(28px/2);
    }

  }

  &[data-cfg-plain] {
    padding:0;
    background:none;
    border:none;
    @include border-radius(0);
    @include box-shadow(none);

    & > article > header {
      padding:0;
    }

    & > article > footer {
      padding:0;
    }

    & > article > section {
      padding-top:0;
      padding-bottom:0;
    }

  }

  &[data-cfg-paper] {
    margin:$space;
    padding:0 0 ($space) 0;
    border-bottom:1px solid $border_color;
    @include user-select(text);

    & > article > header {
      border-bottom:1px solid $border_color;
      padding:0 0 $space 0;

      .ck-link, span {
        font-size: $headtitle_size;
      }

    }

    & > article > section {
      padding:50px 0 $space 0;
      font-size:$article_size;
      line-height:60px/2;

      p {
        padding:0 0 (50px/2) 0;
      }

    }

  }

}

// 列表模块
.ck-cell-list {
  @extend %ck-cell;

  .ck-item {
    @extend %item;

    &:last-child {
      border:none;
    }

  }

  .ck-initem {
    @extend %item-inner;

    &.ck-link:active {
      @extend %item-inner-active;

      .ck-info, .ck-subtitle {
        color:#ccc;
      }

    }

  }

  .ck-icon {
    width:(60px / 2);
    min-height:30px;
    background:#666;
    float:left;
    margin:0 10px 0 0;
  }

  .ck-info {
    @extend %info-text;
    float:right;
    margin-left:10px;
  }

  .ck-title, .ck-initem .ck-link {
    font-size:$title_size;
    display:block;
    line-height:140%;
  }

  .ck-title {
    padding-right:10px;
  }

  .ck-subtitle {
    @extend %info-text;
    display:block;
    line-height:130%;
  }

  .ck-content {
    font-size:$title_size;
    display:block;
  }

  .ck-meta {
    @extend %info-text;
  }

  &[data-style="more"] {

    .ck-info, .ck-icon, .ck-subtitle {
      display:none;
    }

    .ck-initem {
      @extend %more-link;

    }

    .ck-title {
      font-size:$maintitle_size;
    }
  
  }

  &[data-style="menu"] {

    .ck-icon, .ck-subtitle, .ck-meta, .ck-content {
      display:none;
    }

  }

  &[data-style="post"] {
  
  }

  &[data-style="grid"] {
  
    .ck-info, .ck-subtitle, .ck-meta, .ck-content {
      display:none;
    }

    & > article > ul {
      overflow:hidden;
      margin:0 20px;
      padding:10px 0;
      border-bottom:1px solid $border_color;

      &:last-child {
        border-bottom:none;
      }

    }

    footer {
      border-top:none;
    }

    .ck-item {
      float:left;
      padding:0;
      margin:0;
      border:none;
      text-align:center;
    }

    .ck-initem {
      margin:0;
      padding:($space/2) 5px;

      &.ck-link:active {
        padding:($space/2) 5px;
        margin:0;
        @include transform(translateX(0));
      }
    }

    .ck-icon {
      float:none;
      margin:0;
    }

    .ck-title {
      padding:0;
    }
  
  }

}

.ck-cell-mini {
  @extend %ck-cell;

  .ck-item {
    @extend %item;
    border:none;
  }

  .ck-title {
    font-size:$maintitle_size;
    line-height:140%;
  }

  .ck-content {
    font-size:$title_size;
    padding:($space/2) 0;
  }

  .ck-info {
    @extend %info-text;
    display:block;
  }

  .ck-initem {
    overflow:hidden;
    border-top:1px solid $border_color;
    padding:($space/2) 0;
  }

  .ck-icon {
    width:(60px / 2);
    min-height:30px;
    background:#666;
    float:left;
    margin:0 10px 0 0;
  }

  .ck-author {
    font-size:$title_size;
    display:block;
    line-height:140%;
  }

  .ck-subtitle {
    @extend %info-text;
    display:block;
    line-height:130%;
  }

  .ck-meta {
    @extend %info-text;
  }


  &[data-style="slide"] {

    & > article > header {
      border-bottom:none;
    }

    & > article > footer {
      border-top:none;
    }

    .ck-slide {
      background:$card_bgcolor;
      margin:0 10px;
      overflow:hidden;
      position:relative;
    }

    .ck-inslide {
    }
 
    .ck-item {
      padding-left:10px;
      padding-right:10px;
      margin:0;
      display:none;

      &:first-child {
        display:block;
      }

    }

    .ck-page {
      text-align:center;
    
      span {
        display:inline-block;
        margin:0 10px 0 0;
        width: (12px/2);
        height: (12px/2);
        @include border-radius(6px/2);
        background:#D6D6D6;
        border: solid 1px #b3b3b3;

        &:first-child {
          background-color: #252525;
          border: solid 1px #0058ba;
          @include background-image(linear-gradient(bottom, #0084ff, #00a2ff));
        }

      }

    }


  }

}

// 表单模块
.ck-cell-form {

}

//
.ck-cell-parent {
  background:#fff;
  width:100%;
  height:60px;
  position:absolute;
  top:0;
  left:0;
}


// ===========
//  标签
// ===========

.ck-link {
  -webkit-touch-callout: inherit;
  @include user-select(none);
}

.ck-modal {
  @extend .btn;
}

.ck-modal:active {
  @extend .btn:active;
}

// ===========
//  组件
// ===========

// modalView

.moui-modalview {
  visibility:hidden;
  position:absolute;
  top:0;
  left:0;
  width:100%;
  height:100%;
  z-index: $zindex_overlay + $zindex_step;
  @include user-select(none);

  .wrapper {
    @include transform(translateY(100%));
    @include transition(transform 0.4s ease-in-out);

    & > header {
      @extend .ck-header;
      position:fixed;
      top:0;
      left:0;
      width:100%;
      @include border-radius($radius $radius 0 0);
      @include box-shadow(0 2px 3px rgba(0,0,0,.2)); 
      @include background-image(linear-gradient(bottom, #dfdfdf, #fcfcfc));

      h1 {
        @extend .ck-top-title;
      }

      $padding: 15px/2;

      div.confirm, div.cancel {
        display:inline-block;
        margin:$padding 0 0 $padding;
        float:left;
      }

      div.confirm {
        margin:$padding $padding 0 0;
        float:right;
      }

      button {
        @extend .btn;
        width:55px;
      }

    }

    & > article {
      height:1000px;
      background:$card_bgcolor;
      overflow-y:scroll;
      -webkit-overflow-scrolling: touch;

      & > .content {
        padding:50px 0 0 0;
      }

    }

  }

  .shd {
    position:absolute;
    top:0;
    left:0;
    width:100%;
    height:100%;
  }

  &.active {
    visibility:visible;
  }

}

// Growl

.moui-growl {
  display:none;
  position:fixed;
  top:30%;
  left:20px;
  right:20px;
  z-index: $zindex_overlay + $zindex_step;
  padding:20px 10px;
  background:#000;
  opacity:0.8;
  color:#fff;
  font-size:$headtitle_size;
  text-align:center;
  @include border-radius(5px);

  &.active {
    display:block;
  }

}

